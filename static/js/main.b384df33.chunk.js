(this.webpackJsonpbestflix=this.webpackJsonpbestflix||[]).push([[0],{33:function(e,t,a){e.exports=a(56)},38:function(e,t,a){},39:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(18),i=a.n(o);a(38),a(39);var r=function(){return l.a.createElement("header",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("h1",null,"bestFlix")))},m=a(7),c=a(9),s=a.n(c),u=a(19),f=a.n(u);a(40);f.a.initializeApp({apiKey:"AIzaSyDZtyyJl0JQTRgDuEg9mZbneHNpF5ArlIc",authDomain:"bestflix-80621.firebaseapp.com",databaseURL:"https://bestflix-80621.firebaseio.com",projectId:"bestflix-80621",storageBucket:"bestflix-80621.appspot.com",messagingSenderId:"661618832641",appId:"1:661618832641:web:53533ceed3f183e5129700"});var v=f.a,d=a(1);var E=function(e){var t=e.movies,a=e.nominated,o=e.setNominated,i=Object(d.f)(),r=Object(n.useRef)(null);Object(n.useEffect)((function(){a.length&&(r.current=a)}));var m=function(){var e=v.database().ref();r.current.map((function(t){return e.push({Poster:t.Poster,Title:t.Title,Year:t.Year,ID:t.imdbID,Votes:1})})),o([]),s.a.fire({title:"Nominations submitted",text:"Vote for your favourites on the list of nominees!",confirmButtonColor:"#00806a",confirmButtonText:"Ok"}).then((function(){i.push("/bestFlix/nominations")}))},c=a.map((function(e){return e.imdbID}));return t?t.map((function(e){return c.includes(e.imdbID)?l.a.createElement("li",{className:"movie",key:e.imdbID},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.Poster,alt:e.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.Year)),l.a.createElement("button",{disabled:!0,className:"nominate disabled"},"Nominate!")):l.a.createElement("li",{className:"movie",key:e.imdbID},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.Poster,alt:e.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.Year)),l.a.createElement("button",{onClick:function(){return t=e,o(a.concat(t)),void(0===a.length?s.a.fire({title:"Nominated!",text:"You can nominate up to 4 movies. Once you're ready, submit them to the official list of nominees!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Submit nominations",cancelButtonText:"Nominate more"}).then((function(e){e.isConfirmed&&m()})):3===a.length?s.a.fire({title:"Nominated!",text:"You've nominated 4 movies! Submit them to the official list of nominees, or change your nomination list first by removing one or more movies!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Submit nominations",cancelButtonText:"Change nominations"}).then((function(e){e.isConfirmed&&(r.current=a.concat(t),m())})):s.a.fire({title:"Nominated!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Submit nominations",cancelButtonText:"Nominate more"}).then((function(e){e.isConfirmed&&m()})));var t},className:"nominate"},"Nominate!"))})):null},b=a(32);var p=function(e){var t=e.nominated,a=e.setNominated,n=function(e){var n=e.currentTarget.getAttribute("index");if(n>-1){var l=Object(b.a)(t);l.splice(n,1),a(l)}};return t.length?t.map((function(e,t){return l.a.createElement("li",{key:t,className:"nominatedItem"},l.a.createElement("div",null,l.a.createElement("p",null,e.Title),l.a.createElement("button",{"aria-label":"remove nomination",onClick:n,index:t,className:"nominate"},l.a.createElement("i",{className:"fas fa-times"}))))})):l.a.createElement("li",null,"Nominate some movies to add them to your list!")},N=a(5);var h=function(e){var t=e.nominated,a=e.setNominated,n=Object(d.f)();return t.length?l.a.createElement("button",{onClick:function(){var e=v.database().ref();t.map((function(t){return e.push({Poster:t.Poster,Title:t.Title,Year:t.Year,ID:t.imdbID,Votes:1})})),a([]),s.a.fire({title:"Nominations submitted",text:"Vote for your favourites on the list of nominees!",confirmButtonColor:"#00806a",confirmButtonText:"Ok"}).then((function(){n.push("/bestFlix/nominations")}))}},"Submit nominations!"):null};var g=function(e){return e.loading?l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):null},y=a(12),C=a.n(y);C.a.setAppElement("#root");var k=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),r=Object(m.a)(i,2),c=r[0],s=r[1],u=Object(n.useState)(""),f=Object(m.a)(u,2),v=f[0],d=f[1],b=Object(n.useState)([]),y=Object(m.a)(b,2),k=y[0],x=y[1],T=Object(n.useState)(!1),w=Object(m.a)(T,2),B=w[0],O=w[1],j=l.a.useState(!1),S=Object(m.a)(j,2),F=S[0],I=S[1];function D(){I(!0)}function A(){I(!1)}var Y=function(e){s(e.target.value),d(e.target.value),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"".concat(c);O(!0),setTimeout((function(){fetch("https://www.omdbapi.com/?type=movie&s=".concat(e,"&apikey=2b4018f5")).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){return o(e.Search)})).catch((function(e){console.error(e)})).then(O(!1))}),1e3)}(e.target.value)};return 4===k.length?l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"buttonContainer"},l.a.createElement("button",{"aria-label":"view your nomination list",className:"bookmarkButton",onClick:D},l.a.createElement("i",{className:"fas fa-bookmark"}),l.a.createElement("span",{className:"nominatedNumber"},k.length)),l.a.createElement(N.b,{"aria-label":"view the official nomination list",to:"/bestFlix/nominations",className:"page2"},l.a.createElement("i",{className:"fas fa-film"}))),l.a.createElement(C.a,{isOpen:F,onRequestClose:A,className:"modal",overlayClassName:"overlay",role:"dialog"},l.a.createElement("button",{onClick:A,className:"sr-only"},"Close dialog"),l.a.createElement("ul",null,l.a.createElement(p,{nominated:k,setNominated:x})),l.a.createElement(h,{nominated:k,setNominated:x})),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("h2",null,"Welcome to bestFlix, the best movies of all time as voted by you! Search for and nominate up to four movies, and vote for your favourites on the official list of nominees!")))):k.length?l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"buttonContainer"},l.a.createElement("button",{"aria-label":"view your nomination list",className:"bookmarkButton",onClick:D},l.a.createElement("i",{className:"fas fa-bookmark"}),l.a.createElement("span",{className:"nominatedNumber"},k.length)),l.a.createElement(N.b,{"aria-label":"view the official nomination list",to:"/bestFlix/nominations",className:"page2"},l.a.createElement("i",{className:"fas fa-film"}))),l.a.createElement(C.a,{isOpen:F,onRequestClose:A,className:"modal",overlayClassName:"overlay",role:"dialog"},l.a.createElement("button",{onClick:A,className:"sr-only"},"Close dialog"),l.a.createElement("ul",null,l.a.createElement(p,{nominated:k,setNominated:x})),l.a.createElement(h,{nominated:k,setNominated:x})),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("h2",null,"Welcome to bestFlix, the best movies of all time as voted by you! Search for and nominate up to four movies, and vote for your favourites on the official list of nominees.")),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("form",{action:"#"},l.a.createElement("label",{htmlFor:"movieTitle",className:"sr-only"},"Movie title:"),l.a.createElement("input",{onChange:Y,type:"text",name:"movieTitle",className:"movieTitle",id:"movieTitle",placeholder:"Type a movie title"})),l.a.createElement("div",{className:"loadingContainer"},l.a.createElement(g,{loading:B}))),l.a.createElement("ul",{className:"results",id:"results"},l.a.createElement(E,{movies:a,inputValue:v,nominated:k,setNominated:x,searched:c})))):l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"buttonContainer"},l.a.createElement("button",{"aria-label":"view your nomination list",className:"bookmarkButton",onClick:D},l.a.createElement("i",{className:"fas fa-bookmark"})),l.a.createElement(N.b,{"aria-label":"view the official nomination list",to:"/bestFlix/nominations",className:"page2"},l.a.createElement("i",{className:"fas fa-film"}))),l.a.createElement(C.a,{isOpen:F,onRequestClose:A,className:"modal",overlayClassName:"overlay",role:"dialog"},l.a.createElement("button",{onClick:A,className:"sr-only"},"Close dialog"),l.a.createElement("ul",null,l.a.createElement(p,{nominated:k,setNominated:x})),l.a.createElement(h,{nominated:k,setNominated:x})),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("h2",null,"Welcome to bestFlix, the best movies of all time as voted by you! Search for and nominate up to four movies, and vote for your favourites on the official list of nominees.")),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("form",{action:"#"},l.a.createElement("label",{htmlFor:"movieTitle",className:"sr-only"},"Movie title:"),l.a.createElement("input",{onChange:Y,type:"text",name:"movieTitle",className:"movieTitle",id:"movieTitle",placeholder:"Type a movie title"})),l.a.createElement("div",{className:"loadingContainer"},l.a.createElement(g,{loading:B}))),l.a.createElement("ul",{className:"results",id:"results"},l.a.createElement(E,{movies:a,inputValue:v,nominated:k,setNominated:x,searched:c}))))};var x=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),r=Object(m.a)(i,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){s(!0);var e=v.database().ref();setTimeout((function(){e.on("value",(function(e){var t=[],a=e.val();for(var n in a)t.push({key:n,movie:a[n]});var l=t.filter((function(e,t,a){return a.findIndex((function(t){return t.movie.ID===e.movie.ID}))===t})).sort((function(e,t){return parseFloat(t.movie.Votes)-parseFloat(e.movie.Votes)}));o(l),s(!1)}))}),1e3)}),[]),l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement(N.b,{to:"/bestFlix",className:"link"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-left"}))," Back"),l.a.createElement("h3",{className:"awardNominees"},"Award nominees:"),l.a.createElement("div",{className:"loadingContainer"},l.a.createElement(g,{loading:c})),l.a.createElement("ul",{className:"nominations"},a.map((function(e){return l.a.createElement("li",{key:e.key,className:"movie"},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.movie.Poster,alt:e.movie.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.movie.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.movie.Year),l.a.createElement("button",{className:"voteButton",onClick:function(){return function(e){var t=e.key,a=v.database().ref("/".concat(t,"/Votes"));a.once("value",(function(e){var t=e.val();a.set(t+1)}))}(e)},"aria-label":"Vote"},l.a.createElement("i",{className:"fas fa-heart"},l.a.createElement("span",{className:"voteCount"},e.movie.Votes)))))}))),l.a.createElement(N.b,{to:"/bestFlix",className:"link"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-left"}))," Back")))};var T=function(){return l.a.createElement("footer",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("p",null,"Built by ",l.a.createElement("a",{href:"https://lucassilbernagel.com/",target:"_blank",rel:"noopener noreferrer"},"Lucas Silbernagel")),l.a.createElement("p",null," Data provided by ",l.a.createElement("a",{href:"http://www.omdbapi.com/",target:"_blank",rel:"noopener noreferrer"},"OMDb API"))))};var w=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(r,null),l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/bestFlix",component:k}),l.a.createElement(d.a,{exact:!0,path:"/bestFlix/nominations",component:x}),l.a.createElement(d.a,{component:k})),l.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(N.a,null,l.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.b384df33.chunk.js.map