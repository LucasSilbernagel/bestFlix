(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},34:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(25),i=a.n(o);a(33),a(34);var r=function(){return l.a.createElement("header",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("h1",null,"bestFlix")))},c=a(7),m=a(8),s=a.n(m),u=a(16),f=a.n(u);a(35);f.a.initializeApp({apiKey:"AIzaSyDZtyyJl0JQTRgDuEg9mZbneHNpF5ArlIc",authDomain:"bestflix-80621.firebaseapp.com",databaseURL:"https://bestflix-80621.firebaseio.com",projectId:"bestflix-80621",storageBucket:"bestflix-80621.appspot.com",messagingSenderId:"661618832641",appId:"1:661618832641:web:53533ceed3f183e5129700"});var v=f.a,d=a(1);var E=function(e){var t=e.movies,a=e.nominated,o=e.setNominated,i=Object(d.f)(),r=Object(n.useRef)(null);Object(n.useEffect)((function(){a.length&&(r.current=a)}));var c=function(){var e=v.database().ref();r.current.map((function(t){return e.push({Poster:t.Poster,Title:t.Title,Year:t.Year,ID:t.imdbID,Votes:1})})),o([]),s.a.fire({title:"Nominations saved",text:"Vote for your favourites on the list of nominees!",confirmButtonColor:"#00806a",confirmButtonText:"Ok"}).then((function(){i.push("/bestFlix/nominations")}))},m=a.map((function(e){return e.imdbID}));return t?t.map((function(e){return m.includes(e.imdbID)?l.a.createElement("li",{className:"movie",key:e.imdbID},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.Poster,alt:e.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.Year)),l.a.createElement("button",{disabled:!0,className:"nominate disabled"},"Nominate!")):l.a.createElement("li",{className:"movie",key:e.imdbID},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.Poster,alt:e.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.Year)),l.a.createElement("button",{onClick:function(){return t=e,o(a.concat(t)),void(0===a.length?s.a.fire({title:"Nominated!",text:"You can nominate up to 4 movies. Once you're ready, save them to the official list of nominees!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Save nominations",cancelButtonText:"Nominate more"}).then((function(e){e.isConfirmed&&c()})):3===a.length?s.a.fire({title:"Nominated!",text:"You've nominated 4 movies! Save them to the official list of nominees, or change your nomination list first by removing one or more movies!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Save nominations",cancelButtonText:"Change nominations"}).then((function(e){e.isConfirmed&&(r.current=a.concat(t),c())})):s.a.fire({title:"Nominated!",showCancelButton:!0,confirmButtonColor:"#00806a",cancelButtonColor:"#DAA520",confirmButtonText:"Save nominations",cancelButtonText:"Nominate more"}).then((function(e){e.isConfirmed&&c()})));var t},className:"nominate"},"Nominate!"))})):null},p=a(27);var b=function(e){var t=e.nominated,a=e.setNominated,n=function(e){var n=e.target.getAttribute("index");if(n>-1){var l=Object(p.a)(t);l.splice(n,1),a(l)}};return t?t.map((function(e,t){return l.a.createElement("li",{key:t,className:"movie"},l.a.createElement("h3",null,"Nomination #",t+1,":"),l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.Poster,alt:e.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.Year)),l.a.createElement("button",{onClick:n,index:t,className:"nominate"},"Remove nomination"))})):null},N=a(6);var h=function(e){var t=e.nominated,a=e.setNominated,n=Object(d.f)();return t.length?l.a.createElement("button",{onClick:function(){var e=v.database().ref();t.map((function(t){return e.push({Poster:t.Poster,Title:t.Title,Year:t.Year,ID:t.imdbID,Votes:1})})),a([]),s.a.fire({title:"Nominations saved",text:"Vote for your favourites on the list of nominees!",confirmButtonColor:"#00806a",confirmButtonText:"Ok"}).then((function(){n.push("/bestFlix/nominations")}))}},"Save nominations!"):null};var g=function(e){return e.loading?l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):null};var x=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),r=Object(c.a)(i,2),m=r[0],s=r[1],u=Object(n.useState)(""),f=Object(c.a)(u,2),v=f[0],d=f[1],p=Object(n.useState)([]),x=Object(c.a)(p,2),T=x[0],w=x[1],y=Object(n.useState)(!1),C=Object(c.a)(y,2),k=C[0],B=C[1];return 4===T.length?l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("h2",null,"Welcome to bestFlix, the best movies of all time as voted by you! Search for and nominate up to four movies, and vote for your favourites on the official list of nominees!")),l.a.createElement("div",{className:"saveContainer"},l.a.createElement(h,{nominated:T,setNominated:w})),l.a.createElement(N.b,{to:"/bestFlix/nominations",className:"link"},"View nominees ",l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-right"}))),l.a.createElement("ul",{className:"nominations",id:"nominations"},l.a.createElement(b,{nominated:T,setNominated:w})),l.a.createElement("div",{className:"saveContainer"},l.a.createElement(h,{nominated:T,setNominated:w})))):l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("h2",null,"Welcome to bestFlix, the best movies of all time as voted by you! Search for and nominate up to four movies, and vote for your favourites on the official list of nominees.")),l.a.createElement(N.b,{to:"/bestFlix/nominations",className:"link"},"View nominees ",l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-right"}))),l.a.createElement("div",{className:"centerWrapper"},l.a.createElement("form",{action:"#"},l.a.createElement("label",{htmlFor:"movieTitle",className:"sr-only"},"Movie title:"),l.a.createElement("input",{onChange:function(e){s(e.target.value),d(e.target.value),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"".concat(m);B(!0),setTimeout((function(){fetch("https://www.omdbapi.com/?type=movie&s=".concat(e,"&apikey=2b4018f5")).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){return o(e.Search)})).catch((function(e){console.log(e)})).then(B(!1))}),1e3)}(e.target.value)},type:"text",name:"movieTitle",className:"movieTitle",id:"movieTitle",placeholder:"Type a movie title"})),l.a.createElement("div",{className:"loadingContainer"},l.a.createElement(g,{loading:k}))),l.a.createElement("ul",{className:"results",id:"results"},l.a.createElement(E,{movies:a,inputValue:v,nominated:T,setNominated:w,searched:m})),l.a.createElement("div",{className:"saveContainer"},l.a.createElement(h,{nominated:T,setNominated:w})),l.a.createElement("ul",{className:"nominations",id:"nominations"},l.a.createElement(b,{nominated:T,setNominated:w})),l.a.createElement("div",{className:"saveContainer"},l.a.createElement(h,{nominated:T,setNominated:w}))))};var T=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),r=Object(c.a)(i,2),m=r[0],s=r[1];return Object(n.useEffect)((function(){s(!0);var e=v.database().ref();setTimeout((function(){e.on("value",(function(e){var t=[],a=e.val();for(var n in a)t.push({key:n,movie:a[n]});var l=t.filter((function(e,t,a){return a.findIndex((function(t){return t.movie.ID===e.movie.ID}))===t})).sort((function(e,t){return parseFloat(t.movie.Votes)-parseFloat(e.movie.Votes)}));o(l),s(!1)}))}),1e3)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("main",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement(N.b,{to:"/bestFlix",className:"link2"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-left"}))," Back"),l.a.createElement("h3",{className:"awardNominees"},"Award nominees:"),l.a.createElement("div",{className:"loadingContainer"},l.a.createElement(g,{loading:m})),l.a.createElement("ul",{className:"nominations"},a.map((function(e){return l.a.createElement("li",{key:e.key,className:"movie"},l.a.createElement("div",{className:"imgContainer"},l.a.createElement("img",{src:e.movie.Poster,alt:e.movie.Title})),l.a.createElement("div",{className:"movieText"},l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Title"),": ",e.movie.Title),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Year"),": ",e.movie.Year),l.a.createElement("button",{className:"voteButton",onClick:function(){return function(e){console.log(e);var t=e.key,a=v.database().ref("/".concat(t,"/Votes"));a.once("value",(function(e){var t=e.val();a.set(t+1)}))}(e)},"aria-label":"Vote"},l.a.createElement("i",{className:"fas fa-heart"})),l.a.createElement("p",null,l.a.createElement("span",{className:"info"},"Votes"),": ",e.movie.Votes)))}))),l.a.createElement(N.b,{to:"/bestFlix",className:"link2"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-arrow-left"}))," Back"))))};var w=function(){return l.a.createElement("footer",null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("p",null,"Built by ",l.a.createElement("a",{href:"https://lucassilbernagel.com/",target:"_blank",rel:"noopener noreferrer"},"Lucas Silbernagel")),l.a.createElement("p",null," Data provided by ",l.a.createElement("a",{href:"http://www.omdbapi.com/",target:"_blank",rel:"noopener noreferrer"},"OMDb API"))))};var y=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(r,null),l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/bestFlix",component:x}),l.a.createElement(d.a,{exact:!0,path:"/bestFlix/nominations",component:T}),l.a.createElement(d.a,{component:x})),l.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(N.a,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.73cf11fb.chunk.js.map